import{C as y,N as E}from"./ConfigurationList-1bddc793.js";import{i as I,g as L,h as O,d as b,o as s,c as r,a as t,j as z,r as _,F as A,k as S,f as u,l as h,b as P,u as q,t as V,m as p,N as $,n as M,p as D,q as R,s as F,x as H,_ as G}from"./index-086b42c5.js";import{u as J}from"./use-loading-bar-690133ee.js";function K(){const i=I(O,null);return i===null&&L("use-dialog","No outer <n-dialog-provider /> founded."),i}const U={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Q=t("path",{d:"M376 144c-3.92 52.87-44 96-88 96s-84.15-43.12-88-96c-4-55 35-96 88-96s92 42 88 96z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),W=t("path",{d:"M288 304c-87 0-175.3 48-191.64 138.6c-2 10.92 4.21 21.4 15.65 21.4H464c11.44 0 17.62-10.48 15.65-21.4C463.3 352 375 304 288 304z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),X=t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M88 176v112"},null,-1),Y=t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M144 232H32"},null,-1),Z=[Q,W,X,Y],ee=b({name:"PersonAddOutline",render:function(a,g){return s(),r("svg",U,Z)}}),te={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},oe=z('<path d="M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M80 112h352" fill="currentColor"></path><path d="M192 112V72h0a23.93 23.93 0 0 1 24-24h80a23.93 23.93 0 0 1 24 24h0v40" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M256 176v224"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M184 176l8 224"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M328 176l-8 224"></path>',6),ne=[oe],se=b({name:"TrashOutline",render:function(a,g){return s(),r("svg",te,ne)}}),re=i=>(R("data-v-dcd10619"),i=i(),F(),i),ae={class:"sub-content-wrapper"},ie={class:"sidebar-wrapper"},ce=re(()=>t("div",{class:"sidebar-title"},[t("p",null,"账号管理")],-1)),le={class:"sidebar"},ue={class:"sidebar-nav"},de={class:"sidebar-nav-item"},pe={class:"sidebar-nav-text"},he={class:"sidebar-nav-child"},ve=["onClick"],_e={class:"account-remark"},ke={key:0,class:"account-status",style:{color:"mediumseagreen"}},fe={key:1,class:"account-status",style:{color:"brown"}},we={key:0,class:"sub-main-content-wrapper"},ge={key:1,class:"sub-main-content-wrapper"},me=b({__name:"AccountConfigView",setup(i){q();const a=J(),g=K(),c=_(-1),l=_("chatgpt-web"),m=_([]),k=_({}),d=_(null);async function x(){const o=await(await fetch("/backend-api/v1/accounts/model?key="+l.value)).json();delete o.properties.ok,m.value=[o]}async function C(){var v;const o=await(await fetch("/backend-api/v1/accounts/list")).json();k.value=o;const e=H();(v=e==null?void 0:e.proxy)==null||v.$forceUpdate()}function N(n,o){l.value=n,c.value=o,f()}function f(){a.start(),x().then(()=>d.value?(d.value={},Promise.resolve()):C()).then(()=>{a.finish()}).catch(n=>{console.error(n),a.error()})}function j(n){a.start();const o="/backend-api/v1/accounts/"+l.value+(d.value?"":"/"+c.value);fetch(o,{method:"POST",body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>{if(e.ok)return a.finish(),e.json();throw new Error("Something went wrong.")}).then(C).catch(e=>{a.error()})}function B(n){c.value=-1,d.value={},l.value=n,x()}function T(n,o){g.warning({title:"删除账号",content:"你确定要删除这个账号吗？希望你不是点错了。",positiveText:"很确定",negativeText:"点错了",onPositiveClick:()=>{c.value=-1,d.value=null,fetch("/backend-api/v1/accounts/"+l.value+"/"+c.value,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>{if(e.ok)return a.finish(),e.json();throw new Error("Something went wrong.")}).then(C).catch(e=>{a.error()})}})}return f(),(n,o)=>(s(),r("div",ae,[t("div",ie,[ce,t("div",le,[t("ul",ue,[(s(!0),r(A,null,S(Object.keys(k.value),e=>(s(),r("li",{key:e},[t("div",de,[t("div",pe,V(e),1),u(p(E),{class:"sidebar-nav-action"},{default:h(()=>[u(p($),{quaternary:"",size:"tiny",onClick:v=>B(e)},{icon:h(()=>[u(p(M),null,{default:h(()=>[u(p(ee))]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),t("ul",he,[(s(!0),r(A,null,S(k.value[e],(v,w)=>(s(),r("li",{class:D({"sidebar-nav-sub-item":!0,"sidebar-nav-sub-item-active":c.value==w&&l.value==e}),onClick:Ce=>N(e,w),key:w},[t("div",null,[t("p",_e,"账号 "+V(w+1),1),v.ok?(s(),r("p",ke,"可用")):(s(),r("p",fe,"不可用"))])],10,ve))),128))])]))),128))])])]),c.value>=0?(s(),r("div",we,[u(y,{title:"修改账号","configuration-groups":m.value,configurationValue:k.value[l.value][c.value],onSave:j,onReset:f},{tools:h(()=>[u(p($),{quaternary:"",onClick:o[0]||(o[0]=e=>T(l.value,c.value))},{icon:h(()=>[u(p(M),null,{default:h(()=>[u(p(se))]),_:1})]),_:1})]),_:1},8,["configuration-groups","configurationValue"])])):d.value?(s(),r("div",ge,[u(y,{title:"添加账号："+l.value,"configuration-groups":m.value,configurationValue:d.value,onSave:j,onReset:f},null,8,["title","configuration-groups","configurationValue"])])):P("",!0)]))}});const ye=G(me,[["__scopeId","data-v-dcd10619"]]);export{ye as default};
