import{C as m}from"./ConfigurationList-1bddc793.js";import{d as _,r as s,o as h,c as v,a as c,f as l,u as y,S as w,_ as k}from"./index-086b42c5.js";import{u as C}from"./use-loading-bar-690133ee.js";const b={class:"sub-content-wrapper"},x={class:"sidebar-wrapper"},S={class:"sub-main-content-wrapper"},V=_({__name:"PlatformConfigView",setup(B){y();const p=[{key:"onebot",text:"OneBot",path:"/platforms/onebot"},{key:"telegram",text:"Telegram",path:"/platforms/telegram"},{key:"discord",text:"Discord",path:"/platforms/discord"},{key:"wecom",text:"企业微信",path:"/platforms/wecom"},{key:"http",text:"HTTP 接口",path:"/platforms/http"}],o=C(),a=s("onebot"),r=s([]),i=s({});async function f(){const t=await(await fetch("/backend-api/v1/config?key="+a.value+"&type=schema")).json();r.value=[t]}async function u(){const t=await(await fetch("/backend-api/v1/config?key="+a.value+"&type=value")).json();i.value=t}function d(e){a.value=e,n()}function n(){o.start(),f().then(()=>u()).then(()=>{o.finish()}).catch(e=>{console.error(e),o.error()})}function g(e){o.start(),console.log(e),fetch("/backend-api/v1/config?key="+a.value,{method:"POST",body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(t=>{if(t.ok)return o.finish(),t.text();throw new Error("Something went wrong.")}).catch(t=>{console.log("err"),o.error()})}return n(),(e,t)=>(h(),v("div",b,[c("div",x,[l(w,{"nav-list":p,onOnSelect:d,"icon-only":!1,title:"平台设置"})]),c("div",S,[l(m,{title:a.value,"configuration-groups":r.value,configurationValue:i.value,onSave:g,onReset:n},null,8,["title","configuration-groups","configurationValue"])])]))}});const O=k(V,[["__scopeId","data-v-22d2e437"]]);export{O as default};
